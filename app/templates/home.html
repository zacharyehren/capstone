<div class="alert alert-danger alert-box" ng-show="home.userSignedOut()">
  <h4 class="alert-text">Please sign in with Sharethrough email to view tickets</h4>
</div>

<ng-include src="'/templates/loading.html'" ng-show="home.loading"></ng-include>

<h2>Unsolved Tickets</h2>
<table class="table table-bordered table-striped platform-spacing">
  <thead>
    <tr>
      <th ng-click="home.sortData('subject'); selected ='subject'">
        Title
        <div ng-class="home.sortClass" ng-show="selected == 'subject'"></div>
      </th>
      <th ng-click="home.sortData('username'); selected ='username'">
        Submitter
        <div ng-class="home.sortClass" ng-show="selected == 'username'"></div>
      </th>
      <th ng-click="home.sortData('created_at'); selected ='created_at'">
        Date Submitted
        <div ng-class="home.sortClass" ng-show="selected == 'created_at'"></div>
      </th>
      <th ng-click="home.sortData('updated_at'); selected = 'updated_at'">
        Last Updated
        <div ng-class="home.sortClass" ng-show="selected == 'updated_at'"></div>
      </th>
      <th ng-click="home.sortData('status'); selected = 'status'">
        Ticket Status*
        <div ng-class="home.sortClass" ng-show="selected == 'status'"></div>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr ng-repeat="ticket in home.ZenFactory.unsolvedTickets.ticket">
      <td>
        <a ui-sref="ticket" ng-click="home.passTicketInfo(ticket.id, ticket.subject)" class="ticket-title">
            {{ ticket.subject }}
          </a>
          <button ng-show="ticket.hasIncident == true" button type="button" class="btn btn-warning" ng-controller="IncidentsModalCtrl as incidentsModal" ng-click="incidentsModal.openModal(ticket.id);">This ticket has incidents</button>
      </td>
      <td>
        {{ ticket.username }}
      </td>
      <td>
        {{ ticket.created_at | date:'mediumDate' }}
      </td>
      <td>
        {{ ticket.updated_at | date:'mediumDate' }}
      </td>
      <td>
        {{ ticket.status }}
      </td>
    </tr>
  </tbody>
</table>

</table>
<div ng-hide="home.userSignedOut()">
  <h3>*Ticket Status key</h3>
  <table class="table table-bordered table-striped">
    <th>
      Open
    </th>
    <th>
      Pending
    </th>
    <th>
      Hold
    </th>
    <tr>
      <td>
        Support is investigating and will follow-up with an update
      </td>
      <td>
        Waiting on response from CSM <strong>OR</strong> Support waiting on response from Product/Engineering
      </td>
      <td>
        Engineering is in progress of investigating/resolving
      </td>
    </tr>
  </table>
</div>
<div class="bottom-space"></div>
